(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58f88d82"],{"559a":function(t,e,a){"use strict";var r=a("5c65"),s=a.n(r);s.a},"5c65":function(t,e,a){},"60f9":function(t,e,a){},7424:function(t,e){var a="";t.exports={LOGIN:"".concat(a,"/login"),ROUTES:"".concat(a,"/routes"),GOODS:"".concat(a,"/goods"),GOODS_COLUMNS:"".concat(a,"/columns"),COINS:"".concat(a,"/coins"),COINS_MAIN:"".concat(a,"/coins/main"),COINS_ROPSTEN:"".concat(a,"/coins/ropsten"),COINS_KOVAN:"".concat(a,"/coins/kovan")}},"80c1":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("common-layout",[r("div",{staticClass:"top"},[r("div",{staticClass:"header"},[r("img",{staticClass:"logo",attrs:{alt:"logo",src:a("4ffd")}}),r("span",{staticClass:"title"},[t._v(t._s(t.systemName))])]),r("div",{staticClass:"desc"},[t._v("Ant Design 是西湖区最具影响力的 Web 设计规范")])]),r("div",{staticClass:"login"},[r("a-form",{attrs:{form:t.form},on:{submit:t.onSubmit}},[r("a-tabs",{staticStyle:{padding:"0 2px"},attrs:{size:"large",tabBarStyle:{textAlign:"center"}}},[r("a-tab-pane",{key:"1",attrs:{tab:"账户密码登录"}},[r("a-alert",{directives:[{name:"show",rawName:"v-show",value:t.error,expression:"error"}],staticStyle:{"margin-bottom":"24px"},attrs:{type:"error",closable:!0,message:t.error,showIcon:""}}),r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入账户名",whitespace:!0}]}],expression:"['name', {rules: [{ required: true, message: '请输入账户名', whitespace: true}]}]"}],attrs:{autocomplete:"autocomplete",size:"large",placeholder:"admin"}},[r("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请输入密码",whitespace:!0}]}],expression:"['password', {rules: [{ required: true, message: '请输入密码', whitespace: true}]}]"}],attrs:{size:"large",placeholder:"888888",autocomplete:"autocomplete",type:"password"}},[r("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1)],1),r("a-tab-pane",{key:"2",attrs:{tab:"手机号登录"}},[r("a-form-item",[r("a-input",{attrs:{size:"large",placeholder:"mobile number"}},[r("a-icon",{attrs:{slot:"prefix",type:"mobile"},slot:"prefix"})],1)],1),r("a-form-item",[r("a-row",{staticStyle:{margin:"0 -4px"},attrs:{gutter:8}},[r("a-col",{attrs:{span:16}},[r("a-input",{attrs:{size:"large",placeholder:"captcha"}},[r("a-icon",{attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1)],1),r("a-col",{staticStyle:{"padding-left":"4px"},attrs:{span:8}},[r("a-button",{staticClass:"captcha-button",staticStyle:{width:"100%"},attrs:{size:"large"}},[t._v("获取验证码")])],1)],1)],1)],1)],1),r("div",[r("a-checkbox",{attrs:{checked:!0}},[t._v("自动登录")]),r("a",{staticStyle:{float:"right"}},[t._v("忘记密码")])],1),r("a-form-item",[r("a-button",{staticStyle:{width:"100%","margin-top":"24px"},attrs:{loading:t.logging,size:"large",htmlType:"submit",type:"primary"}},[t._v("登录")])],1),r("div",[t._v(" 其他登录方式 "),r("a-icon",{staticClass:"icon",attrs:{type:"alipay-circle"}}),r("a-icon",{staticClass:"icon",attrs:{type:"taobao-circle"}}),r("a-icon",{staticClass:"icon",attrs:{type:"weibo-circle"}}),r("router-link",{staticStyle:{float:"right"},attrs:{to:"/dashboard/workplace"}},[t._v("注册账户")])],1)],1)],1)])},s=[],o=a("5530"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"common-layout"},[a("div",{staticClass:"content"},[t._t("default")],2),a("page-footer",{attrs:{"link-list":t.footerLinks,"link-list2":t.footerLinks2,copyright:t.copyright}})],1)},n=[],c=a("613e"),l=a("5880"),u={name:"CommonLayout",components:{PageFooter:c["a"]},computed:Object(o["a"])({},Object(l["mapState"])("setting",["footerLinks","footerLinks2","copyright"]))},p=u,m=(a("559a"),a("0c7c")),f=Object(m["a"])(p,i,n,!1,null,"2bea3a1d",null),d=f.exports,g=(a("96cf"),a("1da1")),h=a("7424"),b=a("b775");function v(t,e){return y.apply(this,arguments)}function y(){return y=Object(g["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(b["e"])(h["LOGIN"],b["a"].POST,{name:e,password:a}));case 1:case"end":return t.stop()}}),t)}))),y.apply(this,arguments)}function w(){return O.apply(this,arguments)}function O(){return O=Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(b["e"])(h["ROUTES"],b["a"].GET));case 1:case"end":return t.stop()}}),t)}))),O.apply(this,arguments)}var x=a("89a5"),S={name:"Login",components:{CommonLayout:d},data:function(){return{logging:!1,error:"",form:this.$form.createForm(this)}},computed:{systemName:function(){return this.$store.state.setting.systemName}},methods:Object(o["a"])(Object(o["a"])({},Object(l["mapMutations"])("account",["setUser","setPermissions","setRoles"])),{},{onSubmit:function(t){var e=this;t.preventDefault(),this.form.validateFields((function(t){if(!t){e.logging=!0;var a=e.form.getFieldValue("name"),r=e.form.getFieldValue("password");v(a,r).then(e.afterLogin)}}))},afterLogin:function(t){var e=this;this.logging=!1;var a=t.data;if(a.code>=0){var r=a.data,s=r.user,o=r.permissions,i=r.roles;this.setUser(s),this.setPermissions(o),this.setRoles(i),Object(b["f"])({token:a.data.token,expireAt:new Date(a.data.expireAt)}),w().then((function(t){var r=t.data.data;Object(x["d"])(r),e.$router.push("/dashboard/workplace"),e.$message.success(a.message,3)}))}else this.error=a.message}})},k=S,C=(a("9efb"),Object(m["a"])(k,r,s,!1,null,"553fffba",null)),_=C.exports;e["default"]=_},"9efb":function(t,e,a){"use strict";var r=a("60f9"),s=a.n(r);s.a}}]);